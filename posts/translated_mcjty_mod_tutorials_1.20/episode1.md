---
date: 2025-05-17
title: "[æœºå™¨ç‹—è‡ªç¿»] McJtyçš„Modå…¥é—¨æ•™ç¨‹ 1.20 - EP1"
category: ç¿»è¯‘
tags:
  - minecraft
  - mod
  - forge
  - tutorial
description: è¿™ç¯‡æ•™ç¨‹æ˜¯ McJty çš„ Minecraft 1.20 Forge Mod å¼€å‘ç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œè¯¦ç»†ä»‹ç»äº† Mod å¼€å‘çš„åŸºç¡€è®¾ç½®è¿‡ç¨‹ã€‚å†…å®¹åŒ…æ‹¬é¡¹ç›®ç¯å¢ƒé…ç½®ã€ä¾èµ–ç®¡ç†ã€Mod å…¥å£ç±»åˆ›å»ºä»¥åŠå¦‚ä½•å‘æ¸¸æˆæ·»åŠ ç¬¬ä¸€ä¸ªæ–¹å—ã€‚æ•™ç¨‹æ¶µç›–äº† Forge å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¦‚æ˜ å°„è¡¨ã€äº‹ä»¶ç³»ç»Ÿå’Œæ³¨å†Œæ—¶æœºï¼Œé€‚åˆåˆå­¦è€…å…¥é—¨ Minecraft Mod å¼€å‘ã€‚
---

# McJty çš„ Mod å…¥é—¨æ•™ç¨‹ 1.20 - EP1

::: info
åŸæ–‡åœ°å€ï¼š[https://www.mcjty.eu/docs/1.20/ep1](https://www.mcjty.eu/docs/1.20/ep1)

åŸä½œè€…ï¼š[McJty](https://www.mcjty.eu/)

ç¿»è¯‘ï¼š[Kyoku](/pages/about)
:::

::: tip
è¿™ç³»åˆ—çš„æ•™ç¨‹ç¿»è¯‘å¹¶ä¸æ˜¯å®Œå…¨é€è¡ŒæŒ‰åŸæ–‡ç¿»è¯‘çš„ï¼Œå®é™…ä¸Šæ˜¯æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æŒ‰ç…§è‡ªå·±çš„ç†è§£è¿›è¡Œçš„è½¬å†™ä»¥åŠè¡¥å……ã€‚

ä½ å¯ä»¥ä»è¿™é‡Œçš„è¶…é“¾æ¥å¿«é€Ÿè·³åˆ°åç»­çš„ç« èŠ‚ï¼š
:::

## é“¾æ¥

- [Youtube è§†é¢‘](https://youtu.be/BpUbD0NXfp8)
- [GitHub ä»“åº“](https://github.com/McJty/Tut4_1Basics)

## ä»‹ç»

è¿™ç¯‡æ•™ç¨‹ä¸»è¦åŒ…å«åŸºç¡€çš„é¡¹ç›®è®¾ç½®ã€Mod å…¥å£ç±»ä»¥åŠå¦‚ä½•å‘æ¸¸æˆæ·»åŠ ç¬¬ä¸€ä¸ªæ–¹å—ã€‚

å¦‚æœä½ å¯¹è¿™é‡Œçš„ä»£ç æœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ–è€…å‘ç°ä»£ç ä¸å®Œæ•´ï¼Œä½ å¯ä»¥éšæ—¶å‚è€ƒ GitHub ä¸Šçš„å®Œæ•´ä»£ç ã€‚

## åŸºç¡€é¡¹ç›®è®¾ç½®

::: info è¯‘è€…æ³¨ï¼š

æ¯”è¾ƒè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜æ˜¯ Forge å®˜ç½‘åœ¨å›½å†…ä¸æ˜¯è¿ä¸ä¸Šå°±æ˜¯æ…¢çš„è¦å‘½ï¼Œå¦‚æœç½‘ç»œç¯å¢ƒä¸ä½³å¯ä»¥ä½¿ç”¨å›½å†…çš„ MDK é•œåƒï¼š[IMU Mirror](https://mirrors.imucraft.cn/forge/1.20.1/47.4.0/forge-1.20.1-47.4.0-mdk.zip)

:::

è¦å¼€å§‹ç¼–å†™ä½ è‡ªå·±çš„ Modï¼Œ æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä» [Forge å®˜ç½‘ä¸‹è½½ç«™](https://adfoc.us/serve/sitelinks/?id=271228&url=https://maven.minecraftforge.net/net/minecraftforge/forge/1.20.1-47.4.0/forge-1.20.1-47.4.0-mdk.zip) ä¸‹è½½æœ€æ–°çš„ **ForgeMDK**ï¼Œç„¶åå°†å®ƒè§£å‹åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ã€‚

ç„¶åä¸ºä½ çš„ Mod åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œå¹¶ä» MDK ä¸­å¤åˆ¶ä»¥ä¸‹æ–‡ä»¶ï¼š

- `gradle` æ–‡ä»¶å¤¹
- `src` æ–‡ä»¶å¤¹
- `gradlew.bat` å’Œ `gradlew`
- `settings.gradle`, `build.gradle`, ä»¥åŠ `gradle.properties`
- `.gitignore`

![æ–‡ä»¶ç»“æ„](ep1-file-structrue.png)

ç°åœ¨ä½ å¯ä»¥ç”¨ä½ çš„ IDEï¼ˆåœ¨è¿™ç¯‡æ•™ç¨‹é‡Œéƒ½ä»¥ **IntelliJ IDEA** ä½œä¸ºç¤ºä¾‹ï¼‰ æ¥å°† `build.gradle` ä½œä¸ºä¸€ä¸ª Java é¡¹ç›®æ‰“å¼€äº†ï¼Œä¸è¿‡åœ¨è¿™ä¹‹å‰è¦è®°å¾—åœ¨ç”µè„‘ä¸Šå®‰è£… JDK17 åŠä»¥ä¸Šç‰ˆæœ¬çš„ JDKï¼ˆJava Development Kitï¼‰ã€‚

::: info è¯‘è€…æ³¨ï¼š

æ¨èä½¿ç”¨ Microsoft Build of OpenJDKï¼Œä½ å¯ä»¥åœ¨ [è¿™é‡Œ](https://aka.ms/download-jdk/microsoft-jdk-17.0.15-windows-x64.msi) ä¸‹è½½ã€‚

:::

ç°åœ¨ä½ å¯èƒ½æƒ³è¦ä¿®æ”¹ä½ çš„ Mod çš„ `modid`ï¼Œä¸€ä¸ªåªç”± å°å†™å­—æ¯ã€æ•°å­—ä»¥åŠä¸‹åˆ’çº¿ ç»„æˆçš„æ ‡è¯†ç¬¦ã€‚

ä½ éœ€è¦åœ¨ä»¥ä¸‹ä¸¤ä¸ªåœ°æ–¹è¿›è¡Œä¿®æ”¹ï¼š

- `gradle.properties`
- Mod ä¸»ç±»ï¼Œåœ¨è¿™ä¸ª MDK é‡Œé¢å«åš `ExampleMod`ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¹æˆæ›´åˆé€‚çš„åå­—ã€‚åŒæ—¶ï¼Œä½ å¯èƒ½ä¹Ÿéœ€è¦é‡å‘½ååŒ…åã€‚

::: info è¯‘è€…æ³¨ï¼š

Java æœ‰ä¸€å¥—é€šè¡Œçš„æ ‡å‡†å‘½åæ¨¡å¼ï¼ŒåŒ…åé€šå¸¸ä½¿ç”¨å…¬å¸æˆ–ç»„ç»‡çš„åŸŸåå€’åºä½œä¸ºå‰ç¼€ï¼Œä¾‹å¦‚ `com.example`ã€‚

å¦‚æœä½ æœ‰ä¸€ä¸ªè‡ªå·±çš„åŸŸåï¼Œæ¯”å¦‚æˆ‘çš„åŸŸåæ˜¯ `machinedog.wang`ï¼Œæˆ‘ç»™ Mod åˆ†é…çš„ `ModId`ï¼ˆå‘½åç©ºé—´ï¼‰æ˜¯ `examplemod`ï¼Œé‚£ä¹ˆæˆ‘çš„åŒ…åå°±æ˜¯`wang.machinedog.examplemod`ï¼Œæˆ‘çš„ä¸»ç±»åº”è¯¥æ˜¯`./src/main/java/wang/machinedog/examplemod/ExampleMod.java`ã€‚

è‡³äºä¸»ç±»å…¥å£æ–‡ä»¶çš„å‘½åä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆè¦æ±‚ï¼Œéµå®ˆå¤§é©¼å³°å‘½åæ³•å³å¯ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä½ çš„ Mod çš„å…¨åæ¥å‘½åä¸»ç±»ï¼Œæ¯”å¦‚æˆ‘çš„ Mod å«åš`Tutorial1 Basics`ï¼Œå…¥å£æ–‡ä»¶å°±å¯ä»¥å«`Tutorial1Basics.java`

:::

## `gradle.properties`

ä» Forge MDK 1.20 å¼€å§‹ï¼Œé¡¹ç›®çš„é…ç½®éƒ½å¯ä»¥ä¸”æ¨èåœ¨ `gradle.properties`æ–‡ä»¶ä¸­è¿›è¡Œã€‚`build.gradle` ä¸­æœ‰ç‰¹æ®Šçš„ä»»åŠ¡æ¥ç¡®ä¿è¿™äº›å€¼èƒ½å¤Ÿæ­£ç¡®åœ°ä¼ åˆ° `mods.toml` å’Œå…¶ä»–åœ°æ–¹ã€‚

## æ˜ å°„è¡¨

Minecraft çš„æ¸¸æˆæ–‡ä»¶åœ¨åˆ†å‘ä¹‹å‰è¿›è¡Œäº†æ··æ·†ã€‚è¿™æ„å‘³ç€æ‰€æœ‰çš„æ–¹æ³•ã€å­—æ®µå’Œå˜é‡çš„åç§°éƒ½è¢«æ›¿æ¢æˆäº†æ— æ„ä¹‰çš„å­—ç¬¦ä¸²ã€‚ForgeGradle å¯ä»¥å¸®ä½ å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œåæ··æ·†ï¼Œä½†å®ƒéœ€è¦çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªç§æ˜ å°„è¡¨ã€‚

å¯¹äºç°åœ¨çš„ Minecraft ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä¸Šæœ‰ä¸¤ç§æµè¡Œçš„æ˜ å°„è¡¨ï¼š

- **official**ï¼šæ¥è‡ª Mojang çš„å®˜æ–¹æ˜ å°„è¡¨
- **parchment**ï¼šå¸¦æœ‰é¢å¤–çš„å‚æ•°å’Œæ–‡æ¡£çš„å®˜æ–¹æ˜ å°„è¡¨

ä½ å¯ä»¥åœ¨ [è¿™é‡Œ](https://parchmentmc.org/docs/getting-started) æ‰¾åˆ°å…³äº Parchment æ˜ å°„è¡¨çš„æ›´å¤šä¿¡æ¯ã€‚

## JEI & TOP ä¾èµ–é…ç½®

åœ¨å¼€å‘çš„æ—¶å€™èƒ½ç”¨ JEI(Just Enough Items) å’Œ TOP(The One Probe) ä¼šå‡å°‘å¾ˆå¤šéº»çƒ¦ï¼Œä¸ºäº†å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œä½ éœ€è¦åœ¨ `build.gradle` é‡Œä¿®æ”¹`repositories`å­—æ®µçš„å†…å®¹ã€‚

<Heimu>ä»€ä¹ˆä½ é—®æˆ‘ä¸ºä»€ä¹ˆä¼šæåˆ° TOP è¿™ä¸ª Modï¼Ÿä½ è¦ä¸æŸ¥ä¸€ä¸‹ TOP æ˜¯è°å†™çš„ï¼ˆç¬‘</Heimu>

```groovy title="build.gradle"
repositories {
    // Put repositories for dependencies here
    // ForgeGradle automatically adds the Forge maven and Maven Central for you

    maven { // æ·»åŠ  JEI çš„ Maven ä»“åº“
        url "https://maven.blamejared.com"
    }
    maven { // æ·»åŠ  TOP çš„ Maven ä»“åº“
        url "https://maven.k-4u.nl"
    }
}
```

ç„¶åå°† `dependencies` å­—æ®µä¿®æ”¹æˆè¿™æ ·ï¼Œä¸»è¦æ·»åŠ äº†ä¸‹é¢çš„ JEI å’Œ TOP å¼•å…¥çš„éƒ¨åˆ†:

```groovy title="build.gradle"
dependencies {
    // Specify the version of Minecraft to use. If this is any group other than 'net.minecraft', it is assumed
    // that the dep is a ForgeGradle 'patcher' dependency, and its patches will be applied.
    // The userdev artifact is a special name and will get all sorts of transformations applied to it.
    // é™å®šä½¿ç”¨çš„ Minecraft ç‰ˆæœ¬
    minecraft "net.minecraftforge:forge:${minecraft_version}-${forge_version}"

    // Example mod dependency with JEI - using fg.deobf() ensures the dependency is remapped to your development mappings
    // The JEI API is declared for compile time use, while the full JEI artifact is used at runtime
    // ä½œä¸ºç¤ºä¾‹çš„Modä¾èµ–æ˜¯JEIï¼Œé€šè¿‡ä½¿ç”¨ fg.deobf() å¯ä»¥ç¡®ä¿ä¾èµ–è¢«é‡æ˜ å°„åˆ°ä½ å¼€å‘æ—¶é€‰ç”¨çš„æ˜ å°„è¡¨ä¸Š
    // JEI çš„ API è¢«å£°æ˜ä¸ºåªåœ¨ç¼–è¯‘æ—¶ä½¿ç”¨ï¼Œè€Œå®Œæ•´çš„ JEI åˆ™ä¼šåœ¨è¿è¡Œæ—¶ä½¿ç”¨
    compileOnly fg.deobf("mezz.jei:jei-${minecraft_version}-common-api:${jei_version}")
    compileOnly fg.deobf("mezz.jei:jei-${minecraft_version}-forge-api:${jei_version}")
    runtimeOnly fg.deobf("mezz.jei:jei-${minecraft_version}-forge:${jei_version}")

    // é€šè¿‡ implementation å£°æ˜çš„ä¾èµ–è¡¨ç¤ºè¿™ä¸ªä¾èµ–åœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶éƒ½éœ€è¦ï¼Œä¸”ï¼š
    // åœ¨ç¼–è¯‘æ—¶ä¼šè¢«ä½¿ç”¨ã€åœ¨è¿è¡Œæ—¶ä¼šè¢«åŒ…å«ã€ä¸ä¼šæš´éœ²ç»™ä¾èµ–äºè¿™ä¸ª Mod çš„å…¶ä»– Mod
    // é€šè¿‡ project.dependencies.create åˆ›å»ºä¾èµ–å¯¹è±¡è€Œä¸æ˜¯ç›´æ¥ä¼ å…¥ä¾èµ–åç§°å­—ç¬¦ä¸²æ˜¯å¯é€‰çš„ï¼Œè¿™æ˜¯ä¸€ç§æ›´çµæ´»çš„ä¾èµ–é…ç½®æ–¹å¼
    // ä½†æ˜¯å®é™…ä¸Šå’Œ implementation fg.deobf("mcjty.theoneprobe:theoneprobe:${top_version}") æ•ˆæœæ˜¯ä¸€æ ·çš„

    implementation fg.deobf(project.dependencies.create("mcjty.theoneprobe:theoneprobe:${top_version}") {
            transitive = false // ç¦ç”¨ä¼ é€’ä¾èµ–ï¼Œå³ä¸è‡ªåŠ¨å¼•å…¥ The One Probe è‡ªèº«æ‰€ä¾èµ–çš„å…¶ä»–åº“
    })
}
```

ä¸è¦å¿˜è®°ä¿®æ”¹ `gradle.properties`ï¼Œåœ¨å…¶ä¸­ä»»æ„ä¸€ä¸ªä½ å–œæ¬¢çš„åœ°æ–¹æ·»åŠ `jei_version`å’Œ`top_version`è¿™ä¸¤ä¸ªå˜é‡ã€‚

```groovy title="gradle.properties"
jei_version=15.20.0.106
top_version=1.20.1-10.0.1-3
```

åƒä¸‡åƒä¸‡ä¸è¦å¿˜è®°å“¦ï¼ä¸ç„¶ä½ æ˜¯æ‹‰ä¸ä¸‹æ¥ä¾èµ–çš„ï¼ˆç¬‘

æŠŠè¿™äº›æ´»éƒ½å¹²å®Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ·æ–°å¹¶åŒæ­¥ Gradle ä¾èµ–äº†ï¼Œä½ å¯ä»¥åœ¨ Idea ä¸­ç‚¹å‡»å³ä¸Šè§’çš„å¤§è±¡å›¾æ ‡æ¥åˆ·æ–° Gradle é¡¹ç›®ã€‚

![åˆ·æ–° Gradle](ep1-refresh-gradle.png)

::: info è¯‘è€…æ³¨ï¼š

åŸæ•™ç¨‹æ–‡æ¡£ä¸­è¿™éƒ¨åˆ†ç›´æ¥ç¼ºå¤±äº†ä¾èµ–ç‰ˆæœ¬ç›¸å…³çš„é—®é¢˜ï¼Œè¡¥å……ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä» maven ä»“åº“æ‹‰å–ä¾èµ–çš„æ—¶å€™éœ€è¦æŒ‡å®šæˆ‘ä»¬å…·ä½“è¦æ‹‰ä»€ä¹ˆä¾èµ–ï¼Œé€šè¿‡`åŒ…å`:`é¡¹ç›®å`: `ç‰ˆæœ¬å·`æ¥æŒ‡å®šï¼Œä¾‹å¦‚`mezz.jei:jei-1.20.1-common-api:15.20.0.106`ï¼Œå…¶ä¸­ï¼š

- `mezz.jei` æ˜¯åŒ…å
- `jei-1.20.1-common-api` æ˜¯é¡¹ç›®å
- `15.20.0.106` æ˜¯ç‰ˆæœ¬å·

ä½ å¯èƒ½æœ‰å‘ç°ï¼Œæœ‰æ—¶å€™å…¶ä¸­æœ‰ä¸€éƒ¨åˆ†å€¼ä¼šè¢«ä½¿ç”¨å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šå¾ˆå¤šæ¬¡ï¼Œæ¯”å¦‚è¿™é‡Œçš„`1.20.1`ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å˜é‡æ¥ç®€åŒ–é…ç½®ï¼Œé€šè¿‡ä½¿ç”¨`${å˜é‡å}`æ¥å¼•ç”¨`gradle.properties`ä¸­å®šä¹‰çš„å˜é‡ï¼Œè¿™ç§æ ¼å¼åŒ–æ›¿æ¢çš„æ–¹æ³•ä¹‹åè¿˜ä¼šç»å¸¸ä½¿ç”¨ã€‚

:::

::: details ğŸ’¡ å‘æ•£ä¸€ä¸‹

è™½ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†è¦ç”¨`åŒ…å`:`é¡¹ç›®å`: `ç‰ˆæœ¬å·`çš„æ–¹å¼æ¥ä» Maven ä»“åº“æ‹‰ä¾èµ–ï¼Œä½†æ˜¯è¿™é‡Œçš„ä¸‰ä¸ªå€¼å…·ä½“æ€ä¹ˆå¡«è¿˜æ˜¯æœ‰äº›è®©äººä¸€å›¢é›¾æ°´ã€‚

è¿™å°±æ˜¯è€ƒéªŒä½ ä»ç½‘ä¸ŠæŸ¥ä¸œè¥¿çš„æ°´å¹³çš„æ—¶å€™äº†ï¼ˆç¬‘

é¦–å…ˆï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä½ éœ€è¦ä¾èµ–æŸä¸€ä¸ª mod çš„æ—¶å€™ï¼Œè¿™ä¸ª mod çš„å¯ç”¨çš„ `åŒ…å`:`é¡¹ç›®å`:`ç‰ˆæœ¬å·`éƒ½ä¼šåœ¨å®ƒçš„å‘å¸ƒé¡µæˆ–è€…æ–‡æ¡£é‡Œå†™å‡ºæ¥ã€‚

å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥ä» Maven ä»“åº“å»åè¿‡æ¥æ‰¾å…¶ä¸­çš„å†…å®¹ï¼Œä¸€èˆ¬æ¥è®²å¤§éƒ¨åˆ†å¸¸è§çš„ Maven ä»“åº“æ˜¯å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨è®¿é—®å¹¶æŸ¥çœ‹å…¶ä¸­çš„ç›®å½•æ ‘çš„ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é¡ºç€ä½ éœ€è¦çš„ Mod çš„åŒ…åå’Œé¡¹ç›®åå»ä¸€æ­¥æ­¥çš„æ‰¾åˆ°ä½ å…·ä½“éœ€è¦æ‹‰å–çš„ä¾èµ–ä¿¡æ¯ã€‚

å¯æ˜¯è¿˜æœ‰å¾ˆå¤š Mod ç”šè‡³æ ¹æœ¬å°±æ²¡æœ‰é€šè¿‡è‡ªå·±çš„ Maven ä»“åº“è¿›è¡Œåˆ†å‘ï¼Œè€Œæ˜¯ä»…å‘å¸ƒåˆ° CurseForge æˆ–è€… Modrinth ä¸Šï¼Œæ­¤æ—¶ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ Curse Maven / Modrinth Maven æ¥æ‹‰å–è¿™äº› Modã€‚

è¿™ä¸¤ä¸ª Maven ä»“åº“åˆ†å‘æœåŠ¡çš„ä½¿ç”¨å°±åç»­å†è°ˆäº†ï¼Œä½ å¯ä»¥ç›´æ¥è‡ªå·±å°è¯•å»æŸ¥è¯¢ç”¨æ³•ï¼Œæˆ–è€…å®åœ¨æ˜¯è¿™ä¹ˆæ‡’çš„è¯ä¹Ÿå¯ä»¥ç­‰æˆ‘ä»¥åå†™ä¸ªæ–‡æ¡£ã€‚
:::

## ç”Ÿæˆè¿è¡Œé…ç½®

ä¸ºäº†èƒ½å¤Ÿåœ¨ IntelliJ Idea é‡Œè¿è¡Œ Minecraft ä»¥æ–¹ä¾¿è°ƒè¯•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Gradle é€‰é¡¹å¡ä¸­é€‰æ‹©å¹¶è¿è¡Œ `genIntellijRuns` ä»»åŠ¡ã€‚

è¿™ä¸ªä»»åŠ¡ä¼šåœ¨è¿è¡ŒæˆåŠŸä¹‹åç”Ÿæˆ`runClient`ã€`runServer` å’Œ `runData` è¿™å‡ ä¸ªä»»åŠ¡ã€‚è€Œæˆ‘ä»¬ä¸»è¦ä¼šä½¿ç”¨ `runClient` æ¥ç›´æ¥åœ¨ IDE é‡Œè¿è¡Œæ¸¸æˆå®¢æˆ·ç«¯ã€‚

![è¿è¡Œ genIntellijRuns ä»»åŠ¡](ep1-gen-intellij-run.png)

::: warning

å¯¹äº 1.20 åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼ˆæ¯”å¦‚è¿™ç¯‡æ•™ç¨‹ä¸­ä½¿ç”¨çš„ 1.20.1ï¼‰ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ **Java 17** æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

:::

::: tip

è¯·åœ¨ä½ æ¯æ¬¡æ›´æ”¹è¿‡ gradle ç›¸å…³çš„æ–‡ä»¶ä¹‹åéƒ½è¿è¡Œä¸€æ¬¡`genIntellijRuns` ä»»åŠ¡ä»¥ç¡®ä¿è¿è¡Œé…ç½®æ˜¯æœ€æ–°çš„ã€‚

:::

## Mod çš„åŸºç¡€ç±»

Wellï¼Œåœ¨ Java é‡Œä½ å…¶å®æœ‰å¾ˆå¤šå¾ˆå¤šç§ç»„ç»‡ä»£ç çš„æ–¹æ³•ï¼Œä¸è¿‡åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è·Ÿéš MDK çš„ä»£ç ç»„ç»‡æ–¹å¼å³å¯ï¼Œåœ¨ä¹‹åçš„æ•™ç¨‹ä¸­æˆ‘ä»¬è¿˜ä¼šç•¥å¾®ä¿®æ”¹è¿™å¥—ç»“æ„ã€‚

å‡è®¾ Mod çš„ `ModId` æ˜¯ `examplemod`ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç æ¥ä¿®æ”¹ Mod çš„åŸºç±»ï¼š

```java title="Tutorial1Basics.java"
@Mod(ExampleMod.MODID)
public class ExampleMod {
    // è¿™é‡Œçš„ModIdå¿…é¡»è¦å’Œ META-INF/mods.toml ä¸­å¡«å†™çš„ ModId ç›¸åŒ
    // å½“ç„¶ä¹Ÿç†åº”å’Œ Gradle é…ç½®ä¸­çš„ ModId ç›¸åŒ
    public static final String MODID = "examplemod";
    // å®ä¾‹åŒ–ä¸€ä¸ªslf4j loggerï¼Œç”¨æ¥è¾“å‡ºæ—¥å¿—çš„ï¼ˆForgeæ ‡å‡†æ—¥å¿—æ¡†æ¶ï¼‰
    private static final Logger LOGGER = LogUtils.getLogger();

    // åˆ›å»ºä¸€ä¸ªå»¶è¿Ÿçš„æ³¨å†Œå™¨ï¼Œç”¨æ¥åœ¨è¿™ä¸ªModIdçš„å‘½åç©ºé—´ä¸‹æ³¨å†Œæ–¹å—
    public static final DeferredRegister<Block> BLOCKS = DeferredRegister.create(ForgeRegistries.BLOCKS, MODID);
    // åˆ›å»ºä¸€ä¸ªå»¶è¿Ÿçš„æ³¨å†Œå™¨ï¼Œç”¨æ¥åœ¨è¿™ä¸ªModIdçš„å‘½åç©ºé—´ä¸‹æ³¨å†Œç‰©å“
    public static final DeferredRegister<Item> ITEMS = DeferredRegister.create(ForgeRegistries.ITEMS, MODID);

    // åˆ›å»ºä¸€ä¸ªæ–¹å— "examplemod:example_block"
    public static final RegistryObject<Block> EXAMPLE_BLOCK = BLOCKS.register("example_block", () -> new Block(BlockBehaviour.Properties.of().mapColor(MapColor.STONE)));
    // åˆ›å»ºè¿™ä¸ªæ–¹å—å¯¹åº”çš„ æ–¹å—ç‰©å“
    public static final RegistryObject<Item> EXAMPLE_BLOCK_ITEM = ITEMS.register("example_block", () -> new BlockItem(EXAMPLE_BLOCK.get(), new Item.Properties()));

    // æ³¨å†ŒåŒåå…¥å£æ„å»ºæ–¹æ³•ï¼Œåœ¨ Java ä¸­ï¼Œè¿™ç±»æ„é€ æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹ï¼Œå¯ä»¥ç¡®ä¿è¿™ä¸ªç±»åªä¼šè¢«å…¨å±€å®ä¾‹åŒ–ä¸€æ¬¡
    public ExampleMod() {
        // è·å– Forge çš„äº‹ä»¶æ€»çº¿
        IEventBus modEventBus = FMLJavaModLoadingContext.get().getModEventBus();

        // å°† commonSetup æ–¹æ³•æ³¨å†Œåˆ° Forge äº‹ä»¶æ€»çº¿çš„åŠ è½½è¿‡ç¨‹ä¸­
        // è¿™ä¸ªæ–¹æ³•åœ¨åé¢å®šä¹‰
        modEventBus.addListener(this::commonSetup);

        // å°†ä¹‹å‰åˆ›å»ºçš„ä¸¤ä¸ªå»¶æ—¶æ³¨å†Œå™¨æ³¨å†Œåˆ°äº‹ä»¶æ€»çº¿ï¼Œå®ç°æ–¹å—å’Œç‰©å“çš„åˆ›å»º
        BLOCKS.register(modEventBus);
        ITEMS.register(modEventBus);

        // é€šè¿‡äº‹ä»¶æ€»çº¿æ³¨å†Œå½“å‰å®ä¾‹ä¸ºäº‹ä»¶ç›‘å¬å™¨
        MinecraftForge.EVENT_BUS.register(this);

        // å°†æ³¨å†Œçš„ç‰©å“æ·»åŠ åˆ°åˆ›é€ æ¨¡å¼ç‰©å“æ ä¸­ï¼ŒåŒæ ·è¿™ä¸ªæ–¹æ³•åé¢ä¹Ÿä¼šæœ‰å®šä¹‰
        modEventBus.addListener(this::addCreative);
    }

    private void commonSetup(final FMLCommonSetupEvent event) {
        // è¿™ä¸ªæ–¹æ³•ç”¨äºåœ¨ Mod è¢«åŠ è½½çš„æ—¶å€™æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ
        LOGGER.info("HELLO FROM COMMON SETUP");
        LOGGER.info("DIRT BLOCK >> {}", ForgeRegistries.BLOCKS.getKey(Blocks.DIRT));
    }

    private void addCreative(BuildCreativeModeTabContentsEvent event) {
        // è¿™ä¸ªæ–¹æ³•ç”¨äºåœ¨ åˆ›é€ æ¨¡å¼ç‰©å“æ  ä¸­æ·»åŠ ç‰©å“
        if (event.getTabKey() == CreativeModeTabs.BUILDING_BLOCKS) {
            event.accept(EXAMPLE_BLOCK_ITEM);
        }
    }

    // ä½ è¿˜å¯ä»¥é€šè¿‡ @SubscribeEvent æ¥è®©äº‹ä»¶æ€»çº¿å‘ç°å¹¶è°ƒç”¨æ–¹æ³•
    @SubscribeEvent
    public void onServerStarting(ServerStartingEvent event) {
        // åœ¨æ¸¸æˆæœåŠ¡å™¨å¯åŠ¨æ—¶è§¦å‘
        LOGGER.info("HELLO from server starting");
    }

    // ä½ å¯ä»¥é€šè¿‡ @EventBusSubscriber æ¥è®©äº‹ä»¶æ€»çº¿è‡ªåŠ¨æ³¨å†Œæ‰€æœ‰è¢« @SubscribeEvent æ³¨è§£çš„æ–¹æ³•
    @Mod.EventBusSubscriber(modid = MODID, bus = Mod.EventBusSubscriber.Bus.MOD, value = Dist.CLIENT)
    public static class ClientModEvents {
        @SubscribeEvent
        public static void onClientSetup(FMLClientSetupEvent event) {
            // åœ¨æ¸¸æˆå®¢æˆ·ç«¯å¯åŠ¨æ—¶è§¦å‘
            LOGGER.info("HELLO FROM CLIENT SETUP");
            LOGGER.info("MINECRAFT NAME >> {}", Minecraft.getInstance().getUser().getName());
        }
    }
}
```

::: info è¯‘è€…æ³¨

å¦‚æœä½ ä½¿ç”¨äº†ç°ä»£ä¸€ç‚¹çš„ç‰ˆæœ¬çš„ Ideaï¼Œä½ å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé”™è¯¯æç¤ºï¼š

![å†…è”é”™è¯¯æç¤º](ep1-example-mod-inline-error.png)

è¿™æ˜¯å› ä¸º `FMLJavaModLoadingContext` çš„`get()` æ–¹æ³•è¢«æ ‡è®°ä¸ºäº† `@Deprecated`ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå°†åœ¨æœªæ¥è¢«å¼ƒç”¨çš„æ–¹æ³•ã€‚

å¦‚æœä½ æ²¡æœ‰ç‰¹åˆ«ä¸æƒ³çœ‹è§ä»£ç è¢«æ ‡çº¢çš„è¯ï¼Œä½ å¯ä»¥é€‰æ‹©å¿½ç•¥è¿™ä¸ªé”™è¯¯ï¼Œæ¸¸æˆç…§è·‘ä¸è¯¯ã€‚ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ›´æ¢åˆ°æ–°çš„ç¼–å†™æ–¹å¼ã€‚

```java
// æ³¨å†ŒåŒåå…¥å£æ„å»ºæ–¹æ³•ï¼Œåœ¨ Java ä¸­ï¼Œè¿™ç±»æ„é€ æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹ï¼Œå¯ä»¥ç¡®ä¿è¿™ä¸ªç±»åªä¼šè¢«å…¨å±€å®ä¾‹åŒ–ä¸€æ¬¡
public ExampleMod(FMLJavaModLoadingContext context) {
    // è·å– Forge çš„äº‹ä»¶æ€»çº¿
    IEventBus modEventBus = context.getModEventBus();

    // å°† commonSetup æ–¹æ³•æ³¨å†Œåˆ° Forge äº‹ä»¶æ€»çº¿çš„åŠ è½½è¿‡ç¨‹ä¸­
    // è¿™ä¸ªæ–¹æ³•åœ¨åé¢å®šä¹‰
    modEventBus.addListener(this::commonSetup);

    // å°†ä¹‹å‰åˆ›å»ºçš„ä¸¤ä¸ªå»¶æ—¶æ³¨å†Œå™¨æ³¨å†Œåˆ°äº‹ä»¶æ€»çº¿ï¼Œå®ç°æ–¹å—å’Œç‰©å“çš„åˆ›å»º
    BLOCKS.register(modEventBus);
    ITEMS.register(modEventBus);

    // é€šè¿‡äº‹ä»¶æ€»çº¿æ³¨å†Œå½“å‰å®ä¾‹ä¸ºäº‹ä»¶ç›‘å¬å™¨
    MinecraftForge.EVENT_BUS.register(this);

    // å°†æ³¨å†Œçš„ç‰©å“æ·»åŠ åˆ°åˆ›é€ æ¨¡å¼ç‰©å“æ ä¸­ï¼ŒåŒæ ·è¿™ä¸ªæ–¹æ³•åé¢ä¹Ÿä¼šæœ‰å®šä¹‰
    modEventBus.addListener(this::addCreative);
}
```

æ–°ç‰ˆæœ¬çš„ Forge æ”¯æŒä»¥è¿™ç§è¢«ç§°ä¹‹ä¸º `ä¾èµ–æ³¨å…¥` çš„æ–¹å¼æ¥æ³¨å†Œ Mod çš„æ„é€ æ–¹æ³•ã€‚

ä½ é—®ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œä¾èµ–æ³¨å…¥å°±æ˜¯ä¸€ç§åˆ›å»ºå®ä¾‹çš„æ–¹å¼ï¼Œå®ä¾‹æœ¬èº«ä¸è´Ÿè´£è‡ªå·±ä¾èµ–çš„å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†ï¼ˆæ¯”å¦‚å„ç§ä¼ å…¥çš„å‚æ•°ï¼‰ï¼Œè€Œæ˜¯ç”±å¤–éƒ¨æ¥åˆ›å»ºå¹¶ç®¡ç†ï¼Œé€šè¿‡ä¼ å‚çš„æ–¹å¼æ¥æ³¨å…¥åˆ°å®ä¾‹ä¸­ã€‚

:::

## ä¸€äº›ä½ åº”è¯¥çŸ¥é“çš„æ¦‚å¿µ

åœ¨ä¸‹é¢çš„å›¾ä¸­æœ‰ä¸‰åˆ—æˆ‘ä»¬éœ€è¦ç†è§£çš„æ¦‚å¿µï¼š

- `å®šä¹‰`ï¼šè¿™äº›å¯¹è±¡åœ¨æ•´ä¸ªæ¸¸æˆè¿è¡Œå‘¨æœŸä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚ä¾‹å¦‚ï¼Œæ¸¸æˆä¸­åªæœ‰ä¸€ä¸ªé’»çŸ³å‰‘çš„å®ä¾‹ã€‚å¦‚æœä½ çš„èƒŒåŒ…ä¸­æœ‰ä¸¤æŠŠé’»çŸ³å‰‘ï¼Œé‚£ä¹ˆå®ƒä»¬å®é™…ä¸Šæ˜¯ä¸¤ä¸ªä¸åŒçš„ `ItemStack` å®ä¾‹ï¼Œä½†éƒ½å¼•ç”¨äº†åŒä¸€ä¸ªé’»çŸ³å‰‘ `Item` å®ä¾‹ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼

- `ç‰©å“æ `ï¼šä¸€ä¸ªç©å®¶æˆ–å®¹å™¨ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½ç”¨ ItemStackï¼ˆç‰©å“å †æ ˆï¼‰è¡¨ç¤ºã€‚ItemStack æ˜¯æ¸¸æˆä¸­å®é™…ç‰©å“çš„å®ä¾‹ã€‚æ³¨æ„ï¼šè¦èƒ½å¤Ÿå°†æ–¹å—æ”¾å…¥ç‰©å“æ ï¼Œæ–¹å—å¿…é¡»å¯¹åº”äºä¸€ä¸ªå¯¹åº”çš„ BlockItemã€‚

- `ä¸–ç•Œ`ï¼šå½“æ–¹å—è¢«æ”¾ç½®åœ¨ä¸–ç•Œä¸­æ—¶ï¼Œå®ƒä»¬ä»¥ BlockStateï¼ˆæ–¹å—çŠ¶æ€ï¼‰å­˜åœ¨ã€‚BlockState æ˜¯æ–¹å—çš„ç‰¹å®šé…ç½®ã€‚ä¾‹å¦‚ï¼Œç†”ç‚‰å¯ä»¥æœ‰å…­ç§æœå‘ï¼Œè¿™å°±æ˜¯å…­ç§ä¸åŒçš„æ–¹å—çŠ¶æ€ã€‚æ­¤å¤–ï¼Œç†”ç‚‰å¯ä»¥å¤„äºç‚¹ç‡ƒæˆ–æœªç‚¹ç‡ƒçŠ¶æ€ï¼Œæ‰€ä»¥æ€»å…±æœ‰ 12 ç§ä¸åŒçš„æ–¹å—çŠ¶æ€ã€‚_Block Entities_ï¼ˆæ–¹å—å®ä½“ï¼‰æ˜¯ç”¨äºå¸®åŠ©æ‰©å±•ä¸–ç•Œä¸­æ–¹å—åŠŸèƒ½çš„å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿå­˜å‚¨æ›´å¤šä¿¡æ¯ï¼ˆå¦‚ç‰©å“æ å†…å®¹ï¼‰å¹¶æ‰§è¡Œå„ç§åŠŸèƒ½ï¼ˆå¦‚å®šæ—¶æ›´æ–°ï¼‰ã€‚

![Minecraft Concepts](ep1-minecraft-concepts.png)

## Sides

**Forge documentation**: https://docs.minecraftforge.net/en/1.20.x/concepts/sides/

Minecraft runs on two sides: the client and the server. The client is the side that the
player sees and interacts with. The server is the side that runs the game logic. Note that
even in single player there is a server. This we call the integrated server.
Read the forge documentation linked above for more detailed information. Note that this is
a very important thing to understand well.

## Events

**Forge documentation**: https://docs.minecraftforge.net/en/1.20.x/concepts/events/

Events are a very important concept in Forge. They are used to hook into the Minecraft game
at various points. There are two main categories of events:

- `Mod` events: these are events that are fired on the `Mod` event bus. This bus is used for listening to lifecycle events in which mods should initialize
- `Forge` events: these are events that are fired on the `Forge` event bus. This bus is used for listening to events that happen in the game

Some examples of events are:

- `FMLCommonSetupEvent`: this event is fired when the game is starting up. This is the place where you want to do most of your setup
- `FMLClientSetupEvent`: this event is fired when the client is starting up. This is the place where you want to do client-side setup
- `BuildCreativeModeTabContentsEvent`: this event is fired when the creative mode tabs are being built. This is the place where you want to add your items to the creative tabs

The events above are all fired on the `Mod` event bus. There are also events on the `Forge` event bus:

- `ServerStartingEvent`: this event is fired when the server is starting. This is the place where you want to do server-side setup
- `EntityJoinLevelEvent`: this event is fired when an entity is joining a world
- `BlockEvent.BreakEvent`: this event is fired when a block is being broken

But there are many more events. You can find them in your IDE by looking at the `net.minecraftforge.event` package.

:::info Tip!
Events that implement `IModEventBus` are fired on the `Mod` event bus.
:::

A popular image that is often posted on the Forge Discord is this one. Very often people have trouble
with their events. Often the problem is that their method is static or not static when it should be the other way around.

Events

## Registration and Timing

**Forge documentation**: https://docs.minecraftforge.net/en/1.20.x/concepts/registries/

Forge follows very specific timing rules for when you have to do certain things during mod
setup. You can't just register stuff at any time that you want. For every kind of thing that
you register there is a specific time when you have to do that and this is controlled with events.

The _DeferredRegister_ is a very easy way to handle registration of various objects in the Minecraft game (blocks, items, containers, dimensions, entities, ...).
It's important to note that in this register we will always register singletons. i.e. the objects in the 'Definition' column of our previous image.
For every object that we want to add to our mod we declare a RegistryObject and then register it on the appropriate deferred register.
In that registration we also give a supplier (lambda) to actually generate the instance of our registry object at the appropriate time.

Note: objects are registered pretty early.
That means that at the time the FMLCommonSetupEvent is fired all objects from all mods will be registered and ready.

:::danger Warning!
Because registration of objects happens very early it happens before config is handled. That means that
you cannot depend on configuration values during registration! Don't register conditionally! If you must
use other ways to disable your content (like hide from JEI, disable recipes, ...)
:::

Note how we make a corresponding item (using BlockItem) for every block.
That's because we need to be able to hold these blocks in our inventory (in case someone does silk touch on them).

In this specific example we use the standard vanilla Block and Item classes.
Later we will show you how you can make your own custom blocks and items using subclasses.

## Data Generation

**Forge documentation**: https://docs.minecraftforge.net/en/1.20.x/concepts/lifecycle/#data-generation

If we run our mod now you will see that the blocks and items are not correctly textured and that the blocks don't have a good name.
To fix that we need to make models and a bunch of other JSON files.
We will be using data generation to generate those as that's the most flexible way to do things.
With only a small mod it may not seem very beneficial to do this but in the end it's a very nice technique and will help you avoid many errors caused by handwritten JSON files.
Data generation will be covered in the next episode.
